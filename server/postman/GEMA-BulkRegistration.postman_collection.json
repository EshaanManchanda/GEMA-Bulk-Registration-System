{
  "info": {
    "name": "GEMA Bulk Registration System",
    "description": "Complete API collection for GEMA Events Bulk Registration System. Includes authentication, batch registration, payments, invoices, and admin management endpoints.",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{school_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Authentication",
      "description": "School and Admin authentication endpoints",
      "item": [
        {
          "name": "School Auth",
          "item": [
            {
              "name": "Register School",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Test International School\",\n  \"country\": \"India\",\n  \"currency_pref\": \"INR\",\n  \"contact_person\": {\n    \"name\": \"John Doe\",\n    \"email\": \"{{school_email}}\",\n    \"phone\": \"+91-9876543210\",\n    \"designation\": \"Principal\"\n  },\n  \"address\": {\n    \"street\": \"123 School Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"postal_code\": \"400001\",\n    \"country\": \"India\"\n  },\n  \"password\": \"{{school_password}}\",\n  \"external_docs_link\": \"https://testschool.com/docs\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/register",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "register"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "pm.test(\"Response has school data\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.status).to.eql('success');",
                      "    pm.expect(jsonData.data.school).to.exist;",
                      "    pm.environment.set(\"test_school_id\", jsonData.data.school._id);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Login School",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{school_email}}\",\n  \"password\": \"{{school_password}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/login",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "login"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has token\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.tokens).to.exist;",
                      "    pm.expect(jsonData.data.tokens.access_token).to.exist;",
                      "    pm.environment.set(\"school_token\", jsonData.data.tokens.access_token);",
                      "    pm.environment.set(\"test_school_id\", jsonData.data.school._id);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get School Profile",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{school_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/school/me",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "me"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has school data\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.school).to.exist;",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update School Profile",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{school_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"contact_person\": {\n    \"phone\": \"+91-9876543299\"\n  },\n  \"address\": {\n    \"street\": \"456 Updated Street\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/profile",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "profile"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Change Password",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{school_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"current_password\": \"{{school_password}}\",\n  \"new_password\": \"NewPassword123!\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/change-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "change-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Forgot Password",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{school_email}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/forgot-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "forgot-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Reset Password",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"token\": \"RESET_TOKEN_HERE\",\n  \"new_password\": \"NewPassword123!\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/reset-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "reset-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Verify Email",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/school/verify-email?token=VERIFICATION_TOKEN",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "verify-email"],
                  "query": [
                    {
                      "key": "token",
                      "value": "VERIFICATION_TOKEN"
                    }
                  ]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Refresh Token",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refresh_token\": \"REFRESH_TOKEN_HERE\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/school/refresh-token",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "school", "refresh-token"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has new token\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.tokens.access_token).to.exist;",
                      "    pm.environment.set(\"school_token\", jsonData.data.tokens.access_token);",
                      "});"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Admin Auth",
          "item": [
            {
              "name": "Login Admin",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{admin_email}}\",\n  \"password\": \"{{admin_password}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/login",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "login"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has token\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.tokens).to.exist;",
                      "    pm.expect(jsonData.data.tokens.access_token).to.exist;",
                      "    pm.environment.set(\"admin_token\", jsonData.data.tokens.access_token);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get Admin Profile",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{admin_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/admin/me",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "me"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has admin data\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.admin).to.exist;",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Admin Profile",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{admin_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Updated Admin Name\",\n  \"phone\": \"+91-9999999999\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/profile",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "profile"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Change Admin Password",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{admin_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"current_password\": \"{{admin_password}}\",\n  \"new_password\": \"NewAdminPass123!\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/change-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "change-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Forgot Password",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{admin_email}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/forgot-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "forgot-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Reset Password",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"token\": \"RESET_TOKEN_HERE\",\n  \"new_password\": \"NewAdminPass123!\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/reset-password",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "reset-password"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Admin User",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{admin_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"New Admin User\",\n  \"email\": \"newadmin@gema.com\",\n  \"password\": \"AdminPass123!\",\n  \"role\": \"admin\",\n  \"phone\": \"+91-9999999998\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/create",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "create"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Refresh Token",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refresh_token\": \"REFRESH_TOKEN_HERE\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/admin/refresh-token",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "refresh-token"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Response has new token\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.data.tokens.access_token).to.exist;",
                      "    pm.environment.set(\"admin_token\", jsonData.data.tokens.access_token);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Logout Admin",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{admin_token}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/auth/admin/logout",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "admin", "logout"]
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Batch Registration",
      "description": "Bulk student registration via Excel upload",
      "item": [
        {
          "name": "Download Template",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/batches/template/{{test_event_slug}}",
              "host": ["{{base_url}}"],
              "path": ["batches", "template", "{{test_event_slug}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is Excel file\", function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('spreadsheet');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Validate Excel",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/excel/file.xlsx"
                },
                {
                  "key": "event_slug",
                  "value": "{{test_event_slug}}",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/batches/validate",
              "host": ["{{base_url}}"],
              "path": ["batches", "validate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Validation results exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.validation_results).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload Batch",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/excel/file.xlsx"
                },
                {
                  "key": "event_slug",
                  "value": "{{test_event_slug}}",
                  "type": "text"
                },
                {
                  "key": "currency",
                  "value": "INR",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/batches/upload",
              "host": ["{{base_url}}"],
              "path": ["batches", "upload"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Batch created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.batch).to.exist;",
                  "    pm.environment.set(\"test_batch_reference\", jsonData.data.batch.batch_reference);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get My Batches",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/batches/school/my-batches?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["batches", "school", "my-batches"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "active",
                  "disabled": true
                },
                {
                  "key": "event_id",
                  "value": "{{test_event_id}}",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has batches array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.batches).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Batch Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/batches/school/statistics",
              "host": ["{{base_url}}"],
              "path": ["batches", "school", "statistics"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Statistics data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.statistics).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Batch Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/batches/{{test_batch_reference}}",
              "host": ["{{base_url}}"],
              "path": ["batches", "{{test_batch_reference}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Batch details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.batch).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Batch",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/batches/{{test_batch_reference}}",
              "host": ["{{base_url}}"],
              "path": ["batches", "{{test_batch_reference}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Payments",
      "description": "Online and offline payment processing",
      "item": [
        {
          "name": "Initiate Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"batch_reference\": \"{{test_batch_reference}}\",\n  \"payment_mode\": \"online\",\n  \"payment_gateway\": \"razorpay\",\n  \"currency\": \"INR\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/initiate",
              "host": ["{{base_url}}"],
              "path": ["payments", "initiate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payment initiated\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payment).to.exist;",
                  "    pm.environment.set(\"test_payment_id\", jsonData.data.payment._id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Razorpay Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"razorpay_order_id\": \"order_xxxxx\",\n  \"razorpay_payment_id\": \"pay_xxxxx\",\n  \"razorpay_signature\": \"signature_xxxxx\",\n  \"payment_id\": \"{{test_payment_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/verify/razorpay",
              "host": ["{{base_url}}"],
              "path": ["payments", "verify", "razorpay"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Stripe Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"payment_intent_id\": \"pi_xxxxx\",\n  \"payment_id\": \"{{test_payment_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/verify/stripe",
              "host": ["{{base_url}}"],
              "path": ["payments", "verify", "stripe"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Submit Offline Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "batch_reference",
                  "value": "{{test_batch_reference}}",
                  "type": "text"
                },
                {
                  "key": "payment_mode",
                  "value": "offline",
                  "type": "text"
                },
                {
                  "key": "offline_method",
                  "value": "bank_transfer",
                  "type": "text"
                },
                {
                  "key": "transaction_reference",
                  "value": "TXN123456789",
                  "type": "text"
                },
                {
                  "key": "currency",
                  "value": "INR",
                  "type": "text"
                },
                {
                  "key": "receipt",
                  "type": "file",
                  "src": "/path/to/receipt.pdf"
                },
                {
                  "key": "notes",
                  "value": "Bank transfer completed on DD/MM/YYYY",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/payments/offline",
              "host": ["{{base_url}}"],
              "path": ["payments", "offline"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Payment submitted\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payment).to.exist;",
                  "    pm.environment.set(\"test_payment_id\", jsonData.data.payment._id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get My Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/payments/school/my-payments?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["payments", "school", "my-payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "payment_status",
                  "value": "completed",
                  "disabled": true
                },
                {
                  "key": "payment_mode",
                  "value": "online",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has payments array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payments).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Payment Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/payments/{{test_payment_id}}",
              "host": ["{{base_url}}"],
              "path": ["payments", "{{test_payment_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payment details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payment).to.exist;",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Invoices",
      "description": "Invoice generation and management",
      "item": [
        {
          "name": "Generate Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/invoices/generate/{{test_payment_id}}",
              "host": ["{{base_url}}"],
              "path": ["invoices", "generate", "{{test_payment_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Invoice generated\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.invoice).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Invoice URL",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/invoices/url/{{test_batch_reference}}",
              "host": ["{{base_url}}"],
              "path": ["invoices", "url", "{{test_batch_reference}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Invoice URL exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.invoice_url).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get My Invoices",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/invoices/school/my-invoices?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["invoices", "school", "my-invoices"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "paid",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has invoices array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.invoices).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Download Invoice",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/invoices/INVOICE_ID/download",
              "host": ["{{base_url}}"],
              "path": ["invoices", "INVOICE_ID", "download"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is PDF file\", function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('pdf');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Invoice Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/invoices/school/statistics",
              "host": ["{{base_url}}"],
              "path": ["invoices", "school", "statistics"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Statistics data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.statistics).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Bulk Generate Invoices (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"payment_ids\": [\"payment_id_1\", \"payment_id_2\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/invoices/bulk-generate",
              "host": ["{{base_url}}"],
              "path": ["invoices", "bulk-generate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Form Builder",
      "description": "Dynamic form schema management",
      "item": [
        {
          "name": "Get Form Schema by Slug (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/form-builder/events/slug/{{test_event_slug}}/schema",
              "host": ["{{base_url}}"],
              "path": ["form-builder", "events", "slug", "{{test_event_slug}}", "schema"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Schema exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.schema).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Default Template (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/form-builder/templates/default",
              "host": ["{{base_url}}"],
              "path": ["form-builder", "templates", "default"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Template exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.template).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Event Schema (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schema\": {\n    \"fields\": [\n      {\n        \"field_name\": \"student_name\",\n        \"field_type\": \"text\",\n        \"required\": true,\n        \"label\": \"Student Full Name\",\n        \"placeholder\": \"Enter full name\"\n      },\n      {\n        \"field_name\": \"grade\",\n        \"field_type\": \"select\",\n        \"required\": true,\n        \"label\": \"Grade/Class\",\n        \"options\": [\"9\", \"10\", \"11\", \"12\"]\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/form-builder/events/{{test_event_id}}/schema",
              "host": ["{{base_url}}"],
              "path": ["form-builder", "events", "{{test_event_id}}", "schema"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event Schema by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/form-builder/events/{{test_event_id}}/schema",
              "host": ["{{base_url}}"],
              "path": ["form-builder", "events", "{{test_event_id}}", "schema"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Schema exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.schema).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Validate Form Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{school_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event_id\": \"{{test_event_id}}\",\n  \"form_data\": {\n    \"student_name\": \"John Doe\",\n    \"grade\": \"10\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/form-builder/validate",
              "host": ["{{base_url}}"],
              "path": ["form-builder", "validate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Validation results exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.is_valid).to.exist;",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Public Events",
      "description": "Browse available events (public)",
      "item": [
        {
          "name": "List All Events",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/events?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["events"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "category",
                  "value": "competition",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "olympiad",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "event_date",
                  "disabled": true
                },
                {
                  "key": "sortOrder",
                  "value": "asc",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has events array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.events).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event by Slug",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/events/slug/{{test_event_slug}}",
              "host": ["{{base_url}}"],
              "path": ["events", "slug", "{{test_event_slug}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Event details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.event).to.exist;",
                  "    pm.environment.set(\"test_event_id\", jsonData.data.event._id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event by ID",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["events", "{{test_event_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Event details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.event).to.exist;",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - Dashboard",
      "description": "Admin dashboard analytics",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/dashboard/stats",
              "host": ["{{base_url}}"],
              "path": ["admin", "dashboard", "stats"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Stats data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.stats).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Recent Activities",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/dashboard/activities?limit=10",
              "host": ["{{base_url}}"],
              "path": ["admin", "dashboard", "activities"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Activities array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.activities).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Revenue Analytics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/dashboard/revenue?period=30d",
              "host": ["{{base_url}}"],
              "path": ["admin", "dashboard", "revenue"],
              "query": [
                {
                  "key": "period",
                  "value": "30d"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Revenue data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.revenue).to.exist;",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - School Management",
      "description": "School management endpoints",
      "item": [
        {
          "name": "List All Schools",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/schools?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "test",
                  "disabled": true
                },
                {
                  "key": "is_verified",
                  "value": "true",
                  "disabled": true
                },
                {
                  "key": "is_active",
                  "value": "true",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Schools array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.schools).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Admin Created School\",\n  \"country\": \"India\",\n  \"currency_pref\": \"INR\",\n  \"contact_person\": {\n    \"name\": \"Jane Smith\",\n    \"email\": \"admin.school@test.com\",\n    \"phone\": \"+91-9876543222\",\n    \"designation\": \"Director\"\n  },\n  \"address\": {\n    \"street\": \"789 School Road\",\n    \"city\": \"Delhi\",\n    \"state\": \"Delhi\",\n    \"postal_code\": \"110001\",\n    \"country\": \"India\"\n  },\n  \"password\": \"AdminSchool123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"School created\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.school).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get School Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"School details and stats exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.school).to.exist;",
                  "    pm.expect(jsonData.data.statistics).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Approve School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"School verified and approved\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/approve",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "approve"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Reject School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Invalid documentation\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/reject",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "reject"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Suspend School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Policy violation\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/suspend",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "suspend"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Activate School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Issues resolved, reactivating\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/activate",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "activate"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update School",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"admin_notes\": \"Updated by admin\",\n  \"contact_person\": {\n    \"phone\": \"+91-9876543299\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get School Registrations",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/registrations?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "registrations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Registrations array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.registrations).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get School Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/schools/{{test_school_id}}/payments?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "schools", "{{test_school_id}}", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payments array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payments).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - Event Management",
      "description": "Event management endpoints",
      "item": [
        {
          "name": "Create Event",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Mathematics Olympiad 2025\",\n  \"event_slug\": \"math-olympiad-2025\",\n  \"description\": \"Annual mathematics competition for high school students\",\n  \"category\": \"competition\",\n  \"event_date\": \"2025-06-15T09:00:00.000Z\",\n  \"registration_start\": \"2025-03-01T00:00:00.000Z\",\n  \"registration_end\": \"2025-05-30T23:59:59.000Z\",\n  \"venue\": \"Convention Center, Mumbai\",\n  \"grade_levels\": [\"9\", \"10\", \"11\", \"12\"],\n  \"max_students_per_school\": 50,\n  \"fee_inr\": 500,\n  \"fee_usd\": 10,\n  \"status\": \"active\",\n  \"form_schema\": {\n    \"fields\": [\n      {\n        \"field_name\": \"student_name\",\n        \"field_type\": \"text\",\n        \"required\": true,\n        \"label\": \"Student Full Name\"\n      },\n      {\n        \"field_name\": \"grade\",\n        \"field_type\": \"select\",\n        \"required\": true,\n        \"label\": \"Grade/Class\",\n        \"options\": [\"9\", \"10\", \"11\", \"12\"]\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/events",
              "host": ["{{base_url}}"],
              "path": ["admin", "events"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Event created\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.event).to.exist;",
                  "    pm.environment.set(\"test_event_id\", jsonData.data.event._id);",
                  "    pm.environment.set(\"test_event_slug\", jsonData.data.event.event_slug);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List All Events",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "events"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "olympiad",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "active",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Events array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.events).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Event details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.event).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Event",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated description for Mathematics Olympiad\",\n  \"fee_inr\": 550,\n  \"fee_usd\": 12\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Event",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Toggle Event Status",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}/toggle-status",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}", "toggle-status"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event Registrations",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}/registrations?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}", "registrations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Registrations data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.batches).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Event Analytics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}/analytics",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}", "analytics"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Analytics data exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.analytics).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Export Event Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/events/{{test_event_id}}/export",
              "host": ["{{base_url}}"],
              "path": ["admin", "events", "{{test_event_id}}", "export"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is CSV or Excel file\", function () {",
                  "    var contentType = pm.response.headers.get('Content-Type');",
                  "    pm.expect(contentType).to.satisfy(function(type) {",
                  "        return type.includes('csv') || type.includes('spreadsheet');",
                  "    });",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - Payment Management",
      "description": "Payment management and verification endpoints",
      "item": [
        {
          "name": "List All Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/payments?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "completed",
                  "disabled": true
                },
                {
                  "key": "payment_mode",
                  "value": "offline",
                  "disabled": true
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payments array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payments).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Pending Offline Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/payments/pending-offline",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments", "pending-offline"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Pending payments array exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payments).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Payment Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/payments/{{test_payment_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments", "{{test_payment_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payment details exist\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.payment).to.exist;",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify Offline Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Payment verified, transaction confirmed\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/payments/{{test_payment_id}}/verify",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments", "{{test_payment_id}}", "verify"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Reject Offline Payment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{admin_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Invalid receipt or transaction details\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/payments/{{test_payment_id}}/reject",
              "host": ["{{base_url}}"],
              "path": ["admin", "payments", "{{test_payment_id}}", "reject"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Webhooks",
      "description": "Payment gateway webhook endpoints",
      "item": [
        {
          "name": "Razorpay Webhook",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Razorpay-Signature",
                "value": "WEBHOOK_SIGNATURE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"payment.captured\",\n  \"payload\": {\n    \"payment\": {\n      \"entity\": {\n        \"id\": \"pay_xxxxx\",\n        \"amount\": 50000,\n        \"currency\": \"INR\",\n        \"status\": \"captured\",\n        \"order_id\": \"order_xxxxx\"\n      }\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/webhooks/razorpay",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "razorpay"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Stripe Webhook",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Stripe-Signature",
                "value": "WEBHOOK_SIGNATURE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_xxxxx\",\n  \"type\": \"payment_intent.succeeded\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"pi_xxxxx\",\n      \"amount\": 1000,\n      \"currency\": \"usd\",\n      \"status\": \"succeeded\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/webhooks/stripe",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "stripe"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Utility",
      "description": "System utility endpoints",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Server is healthy\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('healthy');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
